---
const { title, keywords, description, pagecover, activeNav, Home, headings } = Astro.props;
// ç½‘ç«™é…ç½®
import SITE_INFO from "@/config";
import { getBeijingTime } from "@/utils/index";
const { GoogleAds, Theme, HomeBanner, AsideShow } = SITE_INFO;
const { ad_Client, asideAD_Slot, articleAD_Slot } = GoogleAds;
// Head ä¾èµ–
import Head from "@/components/Head/Head.astro";
// é¡¶éƒ¨ Header
import Header from "@/components/Header/Header.astro";
// Main åŒºåŸŸ Header
import MainHeader from "@/components/MainHeader/MainHeader.astro";
// åº•éƒ¨ Footer
import Footer from "@/components/Footer/Footer.astro";
// è¿”å›é¡¶éƒ¨
import FixBar from "@/components/FixBar/index.astro";
// æ‰‹æœºç«¯ä¾§è¾¹æ 
import MobileSidebar from "@/components/MobileSidebar/MobileSidebar.astro";
// Aside ä¾§è¾¹æ 
import Aside from "@/components/Aside/Aside.astro";
// åˆ†æç»Ÿè®¡
import Analytics from '@vercel/analytics/astro'
// A Modern CSS Reset
import '@/styles/global.css'
import "@/styles/Reset.less";
// å…¨å±€åŸºç¡€æ ·å¼
import "@/styles/Base.less";
// Layout æ ·å¼
import "./Layout.less";
let aside = '';
if (Astro.slots.has('aside')) {
	console.log(Astro.slots, 'Astro.slots');
	aside = await Astro.slots.render('aside', headings);
}

const railwayStation = {
	line: '5',
	destination: 'é»„è´å²­',
	nextStation: 'æ·±åœ³åŒ—ç«™',
}
---

<html lang="zh-CN">
	<Head Title={title} Keywords={keywords} Description={description} PageCover={pagecover}>
		<!-- wc-ui -->
		<script is:inline src="/assets/js/wc-ui.min.js" defer></script>
		<!-- è°·æ­Œå¹¿å‘ŠJSåŠ è½½é¡¹ -->
		{ad_Client && (asideAD_Slot || articleAD_Slot) && <script is:inline async src={`https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${ad_Client}`} crossorigin="anonymous" />}
		<!-- å½©æ——ğŸˆ -->
		<script is:inline src="/assets/js/caiqi.js" defer></script>
		<!-- è®¾ç½®ä¸»é¢˜é¢œè‰² -->
		<Fragment
			set:html={`<style>:root {${Object.entries(Theme)
				.map(([key, value]) => `${key}:${value};`)
				.join("")}--byt-main-header-height:${Home ? HomeBanner.HomeHeight : HomeBanner.PageHeight};--byt-home-banner:${pagecover?`url(${pagecover}) center/100% no-repeat`:HomeBanner.background.split(',')[0]}}</style>`}
		/>
	</Head>
	<body>
		<MobileSidebar />
		<Header activeNav={activeNav} bgType={HomeBanner.type} />
		<main class="main">
			{HomeBanner.enable && HomeBanner.type !== 'swiper' && <MainHeader />}
			<section class="main-inner" style={`padding-top:${HomeBanner.enable && HomeBanner.type !== 'swiper' ? "0.88rem" : "calc(66px + 0.68rem)"};flex-direction:${AsideShow.position === 'left' ? 'row-reverse' : 'row'}`}>
				<section class="main-inner-content">
					<div class="marquee flex grid grid-cols-2 lg:grid-cols-3 justify-between items-center text-[var(--byt-main-color)] !mb-4 gap-2 md:gap-4 w-full">
						<span class="flex items-center gap-2 w-[300px]">
							<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><!-- Icon from Feather Icon by Megumi Hano - https://github.com/feathericon/feathericon/blob/master/LICENSE --><path fill="currentColor" fill-rule="evenodd" d="M15.085 4.853a2.501 2.501 0 1 1 2.572 3.142A6 6 0 0 1 18 10v6h1c.55 0 1 .45 1 1s-.45 1-1 1h-4v1a3 3 0 0 1-6 0v-1H5c-.55 0-1-.45-1-1s.45-1 1-1h1v-6a6 6 0 0 1 5-5.917V3a1 1 0 0 1 2 0v1.083a6 6 0 0 1 2.085.77M12 20a1 1 0 0 0 1-1v-1h-2v1a1 1 0 0 0 1 1m-4-4h8v-6a4 4 0 1 0-8 0z"/></svg>
							<time><span class="hidden md:inline-block">åŒ—äº¬æ—¶é—´ï¼š</span><span id="bj-time">{getBeijingTime('YYYY-MM-DD HH:mm')}</span></time>
						</span>
						<a href={`/subway/#subway-${railwayStation.line}`} class="col-span-1 lg:col-span-2 blur-bg" id="subway">
							<b-marquee class="w-full" data-id={railwayStation.line} fixed style="--banana-marquee-color: var(--byt-main-color);" duration="40" content={`æ¬¢è¿ä¹˜å${railwayStation.line}å·çº¿ï¼Œæœ¬æ¬¡åˆ—è½¦å¼€å¾€${railwayStation.destination}æ–¹å‘ï¼Œä¸‹ä¸€ç«™${railwayStation.nextStation}ï¼Œè¯·è¦ä¸‹è½¦çš„ä¹˜å®¢å¸¦å¥½æ‚¨çš„è¡Œæç‰©å“å‡†å¤‡ä¸‹è½¦ï¼›æ–‡æ˜å‡ºè¡Œï¼Œç¤¼è®©ä¸ºå…ˆ`}></b-marquee>
						</a>
						<!-- <b-marquee class="flex-1" id="subway" data-id={railwayStation.line} fixed style="--banana-marquee-color: var(--byt-main-color);" duration="40" content={`æ¬¢è¿ä¹˜å${railwayStation.line}å·çº¿ï¼Œæœ¬æ¬¡åˆ—è½¦å¼€å¾€${railwayStation.destination}æ–¹å‘ï¼Œä¸‹ä¸€ç«™${railwayStation.nextStation}ï¼Œè¯·è¦ä¸‹è½¦çš„ä¹˜å®¢å¸¦å¥½æ‚¨çš„è¡Œæç‰©å“å‡†å¤‡ä¸‹è½¦ï¼›æ–‡æ˜å‡ºè¡Œï¼Œç¤¼è®©ä¸ºå…ˆ`}></b-marquee> -->
					</div>
					<slot />
				</section>
				<Aside />
			</section>
		</main>
		<FixBar />
		<Footer />
		<Analytics />
		<script>
			import InitFn from "@/scripts/Init";
			// å…¨å±€åˆå§‹åŒ–
			InitFn();
		</script>
	</body>
</html>
