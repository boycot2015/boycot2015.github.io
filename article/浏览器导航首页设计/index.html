<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><meta content="ie=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=UTF-8" http-equiv=Content-Type><meta content="width=device-width,initial-scale=1,user-scalable=no" name=viewport><title>浏览器导航首页设计 | boycot</title><meta content="Astro, 分享, 博客" name=keywords><meta content=2021/11/01更新:以下内容为旧版网站的记录，站点地址已更新为Howdz起始页项目地址一个浏览器首页站点,包含可切换的常用搜索引擎搜索功能,键盘布局添加快捷收藏网站,并加入键盘按键监听可快速打开,自定义背景图,配置同步功能等功能系统半成品已部署与线上，在线访问：https://howdz.xy name=description><meta content="telephone=no, email=no, date=no, address=no" name=format-detection><meta content=浏览器导航首页设计 name=title><meta content=https://astro-blog.boycot.top name=site><meta content=boycot name=author><meta content="Astro v5.13.10" name=generator><meta content="index, follow, max-image-preview:large" name=robots><meta content="https://bing.img.run/rand.php?timestamp=1759025201453po0vyp&type=2" itemprop=image><meta content=boycot property=article:author><meta content=article property=og:type><meta content=boycot property=og:site_name><meta content=浏览器导航首页设计 property=og:title><meta content=2021/11/01更新:以下内容为旧版网站的记录，站点地址已更新为Howdz起始页项目地址一个浏览器首页站点,包含可切换的常用搜索引擎搜索功能,键盘布局添加快捷收藏网站,并加入键盘按键监听可快速打开,自定义背景图,配置同步功能等功能系统半成品已部署与线上，在线访问：https://howdz.xy property=og:description><meta content=https://astro-blog.boycot.top/article/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%BC%E8%88%AA%E9%A6%96%E9%A1%B5%E8%AE%BE%E8%AE%A1 property=og:url><meta content="https://bing.img.run/rand.php?timestamp=1759025201453po0vyp&type=2" property=og:image><meta content=zh_CN property=og:locale><meta content=summary_large_image name=twitter:card><meta content=boycot name=twitter:site><meta content=boycot name=twitter:creator><meta content=浏览器导航首页设计 name=twitter:title><meta content=2021/11/01更新:以下内容为旧版网站的记录，站点地址已更新为Howdz起始页项目地址一个浏览器首页站点,包含可切换的常用搜索引擎搜索功能,键盘布局添加快捷收藏网站,并加入键盘按键监听可快速打开,自定义背景图,配置同步功能等功能系统半成品已部署与线上，在线访问：https://howdz.xy name=twitter:description><meta content=https://astro-blog.boycot.top/article/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%BC%E8%88%AA%E9%A6%96%E9%A1%B5%E8%AE%BE%E8%AE%A1 name=twitter:url><meta content="https://bing.img.run/rand.php?timestamp=1759025201453po0vyp&type=2" name=twitter:image><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://astro-blog.boycot.top/article/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%BC%E8%88%AA%E9%A6%96%E9%A1%B5%E8%AE%BE%E8%AE%A1"},"headline":"浏览器导航首页设计","description":"2021/11/01更新:以下内容为旧版网站的记录，站点地址已更新为Howdz起始页项目地址一个浏览器首页站点,包含可切换的常用搜索引擎搜索功能,键盘布局添加快捷收藏网站,并加入键盘按键监听可快速打开,自定义背景图,配置同步功能等功能系统半成品已部署与线上，在线访问：https://howdz.xy","image":["https://bing.img.run/rand.php?timestamp=1759025201453po0vyp&type=2"],"datePublished":"2025-09-28T02:06:41.454+08:00","dateModified":"2025-09-28T02:06:41.454+08:00","author":{"@type":"Person","name":"boycot","url":"https://astro-blog.boycot.top"},"publisher":{"@type":"Organization","name":"boycot","logo":{"@type":"ImageObject","url":"https://astro-blog.boycot.top/assets/images/banner/072c12ec85d2d3b5.webp"}},"keywords":"Astro, 分享, 博客"}</script><link href=/sitemap-index.xml rel=sitemap><link href=https://i0.wp.com rel=dns-prefetch><link href=https://cn.cravatar.com rel=dns-prefetch><link href=https://analytics.vvhan.com rel=dns-prefetch><link href=https://vh-api.4ce.cn rel=dns-prefetch><link href=https://registry.npmmirror.com rel=dns-prefetch><link href=https://pagead2.googlesyndication.com rel=dns-prefetch><link href=https://i0.wp.com rel=preconnect><link href=https://cn.cravatar.com rel=preconnect><link href=https://analytics.vvhan.com rel=preconnect><link href=https://vh-api.4ce.cn rel=preconnect><link href=https://registry.npmmirror.com rel=preconnect><link href=https://pagead2.googlesyndication.com rel=preconnect><link href=https://astro-blog.boycot.top/article/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%BC%E8%88%AA%E9%A6%96%E9%A1%B5%E8%AE%BE%E8%AE%A1 rel=canonical><link href=/favicon.svg rel=icon type=image/x-icon><script src=/assets/js/vhCaiqi.js defer=defer></script><style>:root{--byt-main-color:#126e82;--byt-font-color:#34495e;--byt-aside-width:318px;--byt-main-radius:0.28rem;--byt-main-max-width:1458px;--byt-main-header-height:28.88rem;--byt-home-banner:url('https://bing.img.run/rand.php') no-repeat center 60%/cover}</style><link href=/./static/Layout-BDtqLxc7.css rel=stylesheet><link href=/./static/article-_article_-CnDmdB7d.css rel=stylesheet><link href=/./static/about-index-2-B7ev-zJt.css rel=stylesheet><link href=/./static/about-index-1-BItXrbz-.css rel=stylesheet><link href=/./static/about-index-1-BPyknviE.css rel=stylesheet><script src=/./js/page-Bi581Wz1.js type=module></script></head><body><nav class=byt-sidebar><section class=main><div class="byt-sidebar-list user-panel"><h3>boycot</h3></div><div class="byt-sidebar-list byt-link-list"><a href=/links target=_self class=links><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24 class="icon icon-tabler icons-tabler-outline icon-tabler-friends"><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M7 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M5 22v-5l-1 -1v-4a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4l-1 1v5"/><path d="M17 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M15 22v-4h-2l2 -6a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1l2 6h-2v4"/></svg> 友链 </a><a href=/friends target=_self class=friends><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24 class="icon icon-tabler icons-tabler-outline icon-tabler-rss"><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M5 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"/><path d="M4 4a16 16 0 0 1 16 16"/><path d="M4 11a9 9 0 0 1 9 9"/></svg> 圈子 </a><a href=/talking target=_self class=talking><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24 class="icon icon-tabler icons-tabler-outline icon-tabler-live-photo"><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"/><path d="M12 12m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"/><path d="M15.9 20.11l0 .01"/><path d="M19.04 17.61l0 .01"/><path d="M20.77 14l0 .01"/><path d="M20.77 10l0 .01"/><path d="M19.04 6.39l0 .01"/><path d="M15.9 3.89l0 .01"/><path d="M12 3l0 .01"/><path d="M8.1 3.89l0 .01"/><path d="M4.96 6.39l0 .01"/><path d="M3.23 10l0 .01"/><path d="M3.23 14l0 .01"/><path d="M4.96 17.61l0 .01"/><path d="M8.1 20.11l0 .01"/><path d="M12 21l0 .01"/></svg> 动态 </a><a href=/archives target=_self class=archives><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M7 3m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z"/><path d="M4.012 7.26a2.005 2.005 0 0 0 -1.012 1.737v10c0 1.1 .9 2 2 2h10c.75 0 1.158 -.385 1.5 -1"/><path d="M11 7h5"/><path d="M11 10h6"/><path d="M11 13h3"/></svg> 时间轴 </a><a href=/message target=_self class=message><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24 class="icon icon-tabler icons-tabler-outline icon-tabler-message"><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M8 9h8"/><path d="M8 13h6"/><path d="M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z"/></svg> 留言 </a><a href=/about target=_self class=about><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24 class="icon icon-tabler icons-tabler-outline icon-tabler-brand-linkedin"><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M8 11v5"/><path d="M8 8v.01"/><path d="M12 16v-5"/><path d="M16 16v-3a2 2 0 1 0 -4 0"/><path d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z"/></svg> 关于 </a><a href=https://api-docs.boycot.top/ target=_blank class=https:/api-docs.boycot.top/ ><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24 class="icon icon-tabler icons-tabler-outline icon-tabler-link"><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M9 15l6 -6"/><path d="M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464"/><path d="M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"/></svg> API</a></div></section></nav><header class=byt-header><section class=main><a href=/ class="byt-hover home"><svg viewBox="0 0 256 256" xmlns=http://www.w3.org/2000/svg height=24px width=24px><path d="M216 120a8 8 0 0 0-6.78 3.76A180 180 0 0 1 195.41 143l-17.09-89.93a16 16 0 0 0-25.72-9.55l-.13.1L128 64l-24.47-20.38l-.13-.1a16 16 0 0 0-25.72 9.53L60.59 143a179 179 0 0 1-13.81-19.25A8 8 0 0 0 40 120a40 40 0 0 0 0 80h176a40 40 0 0 0 0-80M93.41 56l24.47 20.4l.12.1a15.92 15.92 0 0 0 20 0l.12-.1L162.59 56l13.68 72H79.73ZM40 184a24 24 0 0 1-4.14-47.64C51.28 159.83 67.73 174.65 82.4 184Zm88 0c-.33 0-25.49-.4-53.86-26.6l2.54-13.4h102.63l2.54 13.35a113.3 113.3 0 0 1-27.35 19c-15.4 7.42-26.44 7.65-26.5 7.65m88 0h-42.4c14.67-9.35 31.12-24.17 46.54-47.64A24 24 0 0 1 216 184" fill=currentColor /></svg> <span>boycot</span></a><nav><a href=/links target=_self class="byt-hover nav-link">友链 <svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24 class="icon icon-tabler icons-tabler-outline icon-tabler-friends"><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M7 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M5 22v-5l-1 -1v-4a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4l-1 1v5"/><path d="M17 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M15 22v-4h-2l2 -6a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1l2 6h-2v4"/></svg> </a><a href=/friends target=_self class="byt-hover nav-link">圈子 <svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24 class="icon icon-tabler icons-tabler-outline icon-tabler-rss"><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M5 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"/><path d="M4 4a16 16 0 0 1 16 16"/><path d="M4 11a9 9 0 0 1 9 9"/></svg> </a><a href=/talking target=_self class="byt-hover nav-link">动态 <svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24 class="icon icon-tabler icons-tabler-outline icon-tabler-live-photo"><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"/><path d="M12 12m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"/><path d="M15.9 20.11l0 .01"/><path d="M19.04 17.61l0 .01"/><path d="M20.77 14l0 .01"/><path d="M20.77 10l0 .01"/><path d="M19.04 6.39l0 .01"/><path d="M15.9 3.89l0 .01"/><path d="M12 3l0 .01"/><path d="M8.1 3.89l0 .01"/><path d="M4.96 6.39l0 .01"/><path d="M3.23 10l0 .01"/><path d="M3.23 14l0 .01"/><path d="M4.96 17.61l0 .01"/><path d="M8.1 20.11l0 .01"/><path d="M12 21l0 .01"/></svg> </a><a href=/archives target=_self class="byt-hover nav-link">时间轴 <svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M7 3m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z"/><path d="M4.012 7.26a2.005 2.005 0 0 0 -1.012 1.737v10c0 1.1 .9 2 2 2h10c.75 0 1.158 -.385 1.5 -1"/><path d="M11 7h5"/><path d="M11 10h6"/><path d="M11 13h3"/></svg> </a><a href=/message target=_self class="byt-hover nav-link">留言 <svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24 class="icon icon-tabler icons-tabler-outline icon-tabler-message"><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M8 9h8"/><path d="M8 13h6"/><path d="M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z"/></svg> </a><a href=/about target=_self class="byt-hover nav-link">关于 <svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24 class="icon icon-tabler icons-tabler-outline icon-tabler-brand-linkedin"><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M8 11v5"/><path d="M8 8v.01"/><path d="M12 16v-5"/><path d="M16 16v-3a2 2 0 1 0 -4 0"/><path d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z"/></svg> </a><a href=https://api-docs.boycot.top/ target=_blank class="byt-hover nav-link">API <svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24 class="icon icon-tabler icons-tabler-outline icon-tabler-link"><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M9 15l6 -6"/><path d="M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464"/><path d="M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"/></svg> </a><span class="byt-hover nav-link search-btn"><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M0 0h24v24H0z" fill=none stroke=none></path><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"></path><path d="M21 21l-6 -6"></path></svg> 搜索</span> <span class="byt-hover nav-link menu-btn"><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24><path d="M0 0h24v24H0z" fill=none stroke=none></path><path d="M4 6h16"></path><path d="M7 12h13"></path><path d="M10 18h10"></path></svg></span></nav><section class=byt-search><main><div class=search-input><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m19.6 21l-6.3-6.3q-.75.6-1.725.95T9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l6.3 6.3zM9.5 14q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14" fill=#B4B4B4></path></svg> <input placeholder=搜索文章 type=text></div><section class=byt-search-list><em></em></section></main></section></section></header><main class=main><div class=header-main><div class=avatar><img alt=avatar src=/assets/images/lazy-loading.webp data-byt-lz-src=https://boycot2015.github.io/picx-images-hosting/avatar/avatar.7pnvyzg2f.webp></div><h3 class=auther>boycot</h3><p class=desc></p></div><section class=main-inner style=padding-top:.88rem;flex-direction:row><section class=main-inner-content><article class="byt-animation byt-animation-init byt-article-main"><header><h1>浏览器导航首页设计</h1><div class=article-meta><span class=article-meta-item><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M0 0h24v24H0z" fill=none stroke=none></path><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path><path d="M12 12h3.5"></path><path d="M12 7v5"></path></svg> <time>2020-04-04 凌晨</time> <span class=count><strong>2305</strong>字</span> <span class=time><strong>11.5</strong>分钟</span> </span><a href="/categories/undefined" class=article-meta-item><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24><path d="M0 0h24v24H0z" fill=none stroke=none></path><path d="M4 6h16"></path><path d="M7 12h13"></path><path d="M10 18h10"></path></svg> <span></span></a></div></header><main><blockquote><p>2021/11/01 更新: 以下内容为旧版网站的记录，站点地址已更新为 Howdz 起始页项目地址</p></blockquote><p>一个浏览器首页站点, 包含可切换的常用搜索引擎搜索功能, 键盘布局添加快捷收藏网站, 并加入键盘按键监听可快速打开, 自定义背景图, 配置同步功能等功能</p><p>系统半成品已部署与线上，在线访问：<a href=https://howdz.xyz target=_blank></a><a href=https://howdz.xyz target=_blank rel="noopener nofollow"><span>https://howdz.xyz</span></a></p><h3 id=目录>目录</h3><ol><li><a href=#%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%88%87%E6%8D%A2%E5%8A%9F%E8%83%BD target=_blank rel="noopener nofollow"><span>搜索引擎切换功能</span></a></li><li><a href=#%E9%94%AE%E7%9B%98%E6%94%B6%E8%97%8F%E5%A4%B9%E5%8A%9F%E8%83%BD target=_blank rel="noopener nofollow"><span>键盘收藏夹功能</span></a></li><li><a href=#%E8%83%8C%E6%99%AF%E5%9B%BE%E5%88%87%E6%8D%A2%E5%8A%9F%E8%83%BD target=_blank rel="noopener nofollow"><span>背景图切换功能</span></a></li><li><a href=#%E9%85%8D%E7%BD%AE%E5%90%8C%E6%AD%A5%E5%8A%9F%E8%83%BD target=_blank rel="noopener nofollow"><span>配置同步功能</span></a></li><li><a href=#%E5%85%B3%E4%BA%8E%E4%BC%98%E5%8C%96 target=_blank rel="noopener nofollow"><span>关于优化</span></a></li></ol><h2 id=搜索引擎切换功能>搜索引擎切换功能</h2><p>该功能时为了便于让用户可快速切换不同的搜索引擎，可以涉及不同领域的搜索，例如常用引擎、视频、翻译等搜索。在搜索框聚焦状态下按 Tab 键就可按用户规定的顺序快速切换引擎（Shift + Tab 向上切换）。</p><section class=byt-code-box><span class=byt-code-copy></span><pre class="astro-code github-light" data-language=js style=background-color:#fff;color:#24292e;overflow-x:auto tabindex=0><code><span class=line><span style=color:#6f42c1>handleInputKeyDown</span><span style=color:#24292e> (e) {</span></span>
<span class=line><span style=color:#d73a49>  if</span><span style=color:#24292e> (e.keyCode </span><span style=color:#d73a49>===</span><span style=color:#005cc5> 9</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#d73a49>    if</span><span style=color:#24292e> (e.shiftKey) {</span></span>
<span class=line><span style=color:#005cc5>      this</span><span style=color:#24292e>.activeEngine </span><span style=color:#d73a49>=</span><span style=color:#005cc5> this</span><span style=color:#24292e>.activeEngine </span><span style=color:#d73a49>&#x3C;=</span><span style=color:#005cc5> 0</span><span style=color:#d73a49> ?</span><span style=color:#005cc5> this</span><span style=color:#24292e>.$store.state.engineList.</span><span style=color:#005cc5>length</span><span style=color:#d73a49> -</span><span style=color:#005cc5> 1</span><span style=color:#d73a49> :</span><span style=color:#d73a49> --</span><span style=color:#005cc5>this</span><span style=color:#24292e>.activeEngine</span></span>
<span class=line><span style=color:#24292e>      e.</span><span style=color:#6f42c1>preventDefault</span><span style=color:#24292e>()</span></span>
<span class=line><span style=color:#24292e>    } </span><span style=color:#d73a49>else</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#005cc5>      this</span><span style=color:#24292e>.activeEngine </span><span style=color:#d73a49>=</span><span style=color:#005cc5> this</span><span style=color:#24292e>.activeEngine </span><span style=color:#d73a49>>=</span><span style=color:#005cc5> this</span><span style=color:#24292e>.$store.state.engineList.</span><span style=color:#005cc5>length</span><span style=color:#d73a49> -</span><span style=color:#005cc5> 1</span><span style=color:#d73a49> ?</span><span style=color:#005cc5> 0</span><span style=color:#d73a49> :</span><span style=color:#d73a49> ++</span><span style=color:#005cc5>this</span><span style=color:#24292e>.activeEngine</span></span>
<span class=line><span style=color:#24292e>      e.</span><span style=color:#6f42c1>preventDefault</span><span style=color:#24292e>()</span></span>
<span class=line><span style=color:#24292e>    }</span></span>
<span class=line><span style=color:#24292e>  }</span></span>
<span class=line><span style=color:#d73a49>  if</span><span style=color:#24292e> (e.keyCode </span><span style=color:#d73a49>===</span><span style=color:#005cc5> 13</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>    window.</span><span style=color:#6f42c1>open</span><span style=color:#24292e>(</span><span style=color:#005cc5>this</span><span style=color:#24292e>.$store.state.engineList[</span><span style=color:#005cc5>this</span><span style=color:#24292e>.activeEngine].link </span><span style=color:#d73a49>+</span><span style=color:#6f42c1> encodeURIComponent</span><span style=color:#24292e>(</span><span style=color:#005cc5>this</span><span style=color:#24292e>.searchKey))</span></span>
<span class=line><span style=color:#24292e>  }</span></span>
<span class=line><span style=color:#24292e>}</span></span></code></pre></section><p>寻找目前主流搜索引擎关键字拼接规则记录列表和寻找 Icon 保存到 VUEX 中，目前设置了默认引擎为 Bing 国内、国外、百度，然后备用设置了 Google、搜狗、Bilibili、淘宝等。用户可以在设置页通过拖拽切换引擎顺序与添加备用搜索到当前。</p><p>拖拽功能使用 vuedragable 实现，将当前引擎与备用引擎设为同一个 group，即可让两者可以互相拖拽，并且通过 pull 设置实现当 engineList 长度为 1 是不可再向外拖出。</p><section class=byt-code-box><span class=byt-code-copy></span><pre class="astro-code github-light" data-language=html style=background-color:#fff;color:#24292e;overflow-x:auto tabindex=0><code><span class=line><span style=color:#24292e>...</span></span>
<span class=line><span style=color:#24292e>&#x3C;</span><span style=color:#22863a>div</span><span style=color:#6f42c1> class</span><span style=color:#24292e>=</span><span style=color:#032f62>"text"</span><span style=color:#24292e>>当前引擎组&#x3C;/</span><span style=color:#22863a>div</span><span style=color:#24292e>></span></span>
<span class=line><span style=color:#24292e>&#x3C;</span><span style=color:#b31d28;font-style:italic>draggable</span></span>
<span class=line><span style=color:#6f42c1>  :list</span><span style=color:#24292e>=</span><span style=color:#032f62>"engineList"</span></span>
<span class=line><span style=color:#6f42c1>  :group</span><span style=color:#24292e>=</span><span style=color:#032f62>"{ name: 'engine',pull: engineList.length > 1 }"</span></span>
<span class=line><span style=color:#6f42c1>  @end</span><span style=color:#24292e>=</span><span style=color:#032f62>"handleDragEnd"</span></span>
<span class=line><span style=color:#24292e>></span></span>
<span class=line><span style=color:#24292e>  &#x3C;</span><span style=color:#22863a>transition-group</span></span>
<span class=line><span style=color:#6f42c1>    type</span><span style=color:#24292e>=</span><span style=color:#032f62>"transition"</span></span>
<span class=line><span style=color:#6f42c1>    name</span><span style=color:#24292e>=</span><span style=color:#032f62>"flip-list"</span></span>
<span class=line><span style=color:#6f42c1>    class</span><span style=color:#24292e>=</span><span style=color:#032f62>"now-engine-list engine-list"</span></span>
<span class=line><span style=color:#24292e>  ></span></span>
<span class=line><span style=color:#24292e>    &#x3C;</span><span style=color:#22863a>div</span><span style=color:#6f42c1> class</span><span style=color:#24292e>=</span><span style=color:#032f62>"engine-list-item"</span><span style=color:#6f42c1> v-for</span><span style=color:#24292e>=</span><span style=color:#032f62>"item in engineList"</span><span style=color:#6f42c1> :key</span><span style=color:#24292e>=</span><span style=color:#032f62>"item.name"</span><span style=color:#24292e>></span></span>
<span class=line><span style=color:#24292e>      &#x3C;</span><span style=color:#22863a>img</span><span style=color:#6f42c1> :src</span><span style=color:#24292e>=</span><span style=color:#032f62>"item.iconPath"</span><span style=color:#6f42c1> alt</span><span style=color:#24292e>=</span><span style=color:#032f62>"icon"</span><span style=color:#6f42c1> width</span><span style=color:#24292e>=</span><span style=color:#032f62>"24"</span><span style=color:#6f42c1> height</span><span style=color:#24292e>=</span><span style=color:#032f62>"24"</span><span style=color:#24292e> /></span></span>
<span class=line><span style=color:#24292e>      &#x3C;</span><span style=color:#22863a>div</span><span style=color:#6f42c1> class</span><span style=color:#24292e>=</span><span style=color:#032f62>"text"</span><span style=color:#24292e>>{{item.name}}&#x3C;/</span><span style=color:#22863a>div</span><span style=color:#24292e>></span></span>
<span class=line><span style=color:#24292e>    &#x3C;/</span><span style=color:#22863a>div</span><span style=color:#24292e>></span></span>
<span class=line><span style=color:#24292e>  &#x3C;/</span><span style=color:#22863a>transition-group</span><span style=color:#24292e>></span></span>
<span class=line><span style=color:#24292e>&#x3C;/</span><span style=color:#b31d28;font-style:italic>draggable</span><span style=color:#24292e>></span></span>
<span class=line><span style=color:#24292e>&#x3C;</span><span style=color:#22863a>div</span><span style=color:#6f42c1> class</span><span style=color:#24292e>=</span><span style=color:#032f62>"text"</span><span style=color:#24292e>>备用引擎组&#x3C;/</span><span style=color:#22863a>div</span><span style=color:#24292e>></span></span>
<span class=line><span style=color:#24292e>&#x3C;</span><span style=color:#b31d28;font-style:italic>draggable</span><span style=color:#6f42c1> :list</span><span style=color:#24292e>=</span><span style=color:#032f62>"backupEngineList"</span><span style=color:#6f42c1> group</span><span style=color:#24292e>=</span><span style=color:#032f62>"engine"</span><span style=color:#6f42c1> @end</span><span style=color:#24292e>=</span><span style=color:#032f62>"handleDragEnd"</span><span style=color:#24292e>></span></span>
<span class=line><span style=color:#24292e>  &#x3C;</span><span style=color:#22863a>transition-group</span></span>
<span class=line><span style=color:#6f42c1>    type</span><span style=color:#24292e>=</span><span style=color:#032f62>"transition"</span></span>
<span class=line><span style=color:#6f42c1>    name</span><span style=color:#24292e>=</span><span style=color:#032f62>"flip-list"</span></span>
<span class=line><span style=color:#6f42c1>    class</span><span style=color:#24292e>=</span><span style=color:#032f62>"backupEngineList engine-list"</span></span>
<span class=line><span style=color:#24292e>  ></span></span>
<span class=line><span style=color:#24292e>    &#x3C;</span><span style=color:#22863a>div</span></span>
<span class=line><span style=color:#6f42c1>      class</span><span style=color:#24292e>=</span><span style=color:#032f62>"engine-list-item"</span></span>
<span class=line><span style=color:#6f42c1>      v-for</span><span style=color:#24292e>=</span><span style=color:#032f62>"item in backupEngineList"</span></span>
<span class=line><span style=color:#6f42c1>      :key</span><span style=color:#24292e>=</span><span style=color:#032f62>"item.name"</span></span>
<span class=line><span style=color:#24292e>    ></span></span>
<span class=line><span style=color:#24292e>      &#x3C;</span><span style=color:#22863a>img</span><span style=color:#6f42c1> :src</span><span style=color:#24292e>=</span><span style=color:#032f62>"item.iconPath"</span><span style=color:#6f42c1> alt</span><span style=color:#24292e>=</span><span style=color:#032f62>"icon"</span><span style=color:#6f42c1> width</span><span style=color:#24292e>=</span><span style=color:#032f62>"24"</span><span style=color:#6f42c1> height</span><span style=color:#24292e>=</span><span style=color:#032f62>"24"</span><span style=color:#24292e> /></span></span>
<span class=line><span style=color:#24292e>      &#x3C;</span><span style=color:#22863a>div</span><span style=color:#6f42c1> class</span><span style=color:#24292e>=</span><span style=color:#032f62>"text"</span><span style=color:#24292e>>{{item.name}}&#x3C;/</span><span style=color:#22863a>div</span><span style=color:#24292e>></span></span>
<span class=line><span style=color:#24292e>    &#x3C;/</span><span style=color:#22863a>div</span><span style=color:#24292e>></span></span>
<span class=line><span style=color:#24292e>  &#x3C;/</span><span style=color:#22863a>transition-group</span><span style=color:#24292e>></span></span>
<span class=line><span style=color:#24292e>&#x3C;/</span><span style=color:#b31d28;font-style:italic>draggable</span><span style=color:#24292e>></span></span>
<span class=line><span style=color:#24292e>...</span></span></code></pre></section><h2 id=键盘收藏夹功能>键盘收藏夹功能</h2><p>用户可通过点击模拟键盘按键快速跳转到收藏好的网站，未设置时点击则弹窗让用户添加。</p><p>主要功能实现：</p><ol><li>截取用户输入的 http 地址中的域名，然后通过“域名 + /favicon.ico”获取主流网站的 Icon，当获取不到时，使用截取 Title 的首字符作为 Icon。亦可使用谷歌的 Favicon 服务，通过“<a href="http://www.google.cn/s2/favicons?domain=" target=_blank rel="noopener nofollow"><span>http://www.google.cn/s2/favicons?domain=</span></a> + 域名”获取网站 Icon，但获取出来的都是固定 16px x 16px 大小。</li><li>使用 Flex 布局实现模拟键盘布局</li><li>监听按键添加事件，window.open 打开用户收藏的网站</li><li>使用个人组件<a href=https://kongfandong.cn/howdy/animation-dialog target=_blank>Animation Dialog</a>实现动画弹窗(Where open where close 交互)</li></ol><section class=byt-code-box><span class=byt-code-copy></span><pre class="astro-code github-light" data-language=html style=background-color:#fff;color:#24292e;overflow-x:auto tabindex=0><code><span class=line><span style=color:#24292e>&#x3C;</span><span style=color:#22863a>img</span></span>
<span class=line><span style=color:#6f42c1>  class</span><span style=color:#24292e>=</span><span style=color:#032f62>"icon"</span></span>
<span class=line><span style=color:#6f42c1>  :src</span><span style=color:#24292e>=</span><span style=color:#032f62>"`${userSettingKeyMap[key].url.match(/^(\w+:\/\/)?([^\/]+)/i) ? userSettingKeyMap[key].url.match(/^(\w+:\/\/)?([^\/]+)/i)[0] : ''}/favicon.ico`"</span></span>
<span class=line><span style=color:#6f42c1>  alt</span><span style=color:#24292e>=</span><span style=color:#032f62>"link"</span></span>
<span class=line><span style=color:#6f42c1>  @load</span><span style=color:#24292e>=</span><span style=color:#032f62>"hanldeImgLoad"</span></span>
<span class=line><span style=color:#6f42c1>  @error</span><span style=color:#24292e>=</span><span style=color:#032f62>"handleImgError"</span></span>
<span class=line><span style=color:#24292e>/></span></span>
<span class=line><span style=color:#24292e>&#x3C;</span><span style=color:#22863a>div</span><span style=color:#6f42c1> class</span><span style=color:#24292e>=</span><span style=color:#032f62>"no-icon"</span><span style=color:#24292e>>{{userSettingKeyMap[key].remark.slice(0,1)}}&#x3C;/</span><span style=color:#22863a>div</span><span style=color:#24292e>></span></span></code></pre></section><p><img alt=添加展示 src=/assets/images/lazy-loading.webp data-byt-lz-src=https://cdn.kongfandong.cn/img/blog/kcrP38wJedoSsqT.gif class=byt-article-img></p><h2 id=背景图切换功能>背景图切换功能</h2><p>背景图使用的图片来自免费无版权图片壁纸网站<a href=https://unsplash.com/ target=_blank>Unplash</a>，并使用其提供的<a href=https://unsplash.com/documentation target=_blank>API 服务</a>获取 JSON 图片列表。其 Api 接口不可直接调用，需要注册获取到 accessKey 之后将其放在请求中才可使用接口服务，且普通用户每小时只可调用 50 次，因此不合适直接把获取 unsplash 图片的请求放在前端。</p><h3 id=后端实现>后端实现</h3><p>后端使用 Nodejs 每天定时调用 1 次获取 Unsplash 最新图片的接口，并把返回数据保留为 json 文件，然后由 Nodejs 提供接口，即背景图片以天为单位更新。</p><section class=byt-code-box><span class=byt-code-copy></span><pre class="astro-code github-light" data-language=js style=background-color:#fff;color:#24292e;overflow-x:auto tabindex=0><code><span class=line><span style=color:#6a737d>// Nodejs后端服务</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#24292e> { </span><span style=color:#005cc5>unsplashApiKey</span><span style=color:#24292e> } </span><span style=color:#d73a49>=</span><span style=color:#6f42c1> require</span><span style=color:#24292e>(</span><span style=color:#032f62>'../config/config'</span><span style=color:#24292e>) </span><span style=color:#6a737d>// 调用UnsplashAPI的Access Key</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#005cc5> schedule</span><span style=color:#d73a49> =</span><span style=color:#6f42c1> require</span><span style=color:#24292e>(</span><span style=color:#032f62>'node-schedule'</span><span style=color:#24292e>) </span><span style=color:#6a737d>// nodejs定时器服务</span></span>
<span class=line><span style=color:#d73a49>...</span></span>
<span class=line><span style=color:#6a737d>// 获取Unsplash最新图片</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#6f42c1> getUnsplashPhotos</span><span style=color:#d73a49> =</span><span style=color:#d73a49> async</span><span style=color:#24292e> () </span><span style=color:#d73a49>=></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#d73a49>  const</span><span style=color:#005cc5> pageSize</span><span style=color:#d73a49> =</span><span style=color:#005cc5> 30</span></span>
<span class=line><span style=color:#d73a49>  const</span><span style=color:#005cc5> photosList</span><span style=color:#d73a49> =</span><span style=color:#24292e> []</span></span>
<span class=line><span style=color:#d73a49>  try</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#d73a49>    for</span><span style=color:#24292e> (</span><span style=color:#d73a49>let</span><span style=color:#24292e> page </span><span style=color:#d73a49>=</span><span style=color:#005cc5> 1</span><span style=color:#24292e>; page </span><span style=color:#d73a49>&#x3C;=</span><span style=color:#005cc5> 4</span><span style=color:#24292e>; page</span><span style=color:#d73a49>++</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#d73a49>      const</span><span style=color:#005cc5> url</span><span style=color:#d73a49> =</span><span style=color:#032f62> `https://api.unsplash.com/photos?page=${</span><span style=color:#24292e>page</span><span style=color:#032f62>}&#x26;per_page=${</span><span style=color:#24292e>pageSize</span><span style=color:#032f62>}&#x26;client_id=${</span><span style=color:#24292e>unsplashApiKey</span><span style=color:#032f62>}`</span></span>
<span class=line><span style=color:#d73a49>      const</span><span style=color:#24292e> { </span><span style=color:#005cc5>data</span><span style=color:#24292e> } </span><span style=color:#d73a49>=</span><span style=color:#d73a49> await</span><span style=color:#24292e> axios.</span><span style=color:#6f42c1>get</span><span style=color:#24292e>(url)</span></span>
<span class=line><span style=color:#d73a49>      const</span><span style=color:#005cc5> result</span><span style=color:#d73a49> =</span><span style=color:#24292e> data.</span><span style=color:#6f42c1>filter</span><span style=color:#24292e>(</span><span style=color:#e36209>item</span><span style=color:#d73a49> =></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#d73a49>        return</span><span style=color:#24292e> item.width </span><span style=color:#d73a49>></span><span style=color:#24292e> item.height</span></span>
<span class=line><span style=color:#24292e>      }).</span><span style=color:#6f42c1>map</span><span style=color:#24292e>(</span><span style=color:#e36209>item</span><span style=color:#d73a49> =></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#d73a49>        const</span><span style=color:#24292e> { </span><span style=color:#005cc5>id</span><span style=color:#24292e>, </span><span style=color:#005cc5>width</span><span style=color:#24292e>, </span><span style=color:#005cc5>height</span><span style=color:#24292e>, </span><span style=color:#005cc5>color</span><span style=color:#24292e>, </span><span style=color:#005cc5>description</span><span style=color:#24292e>, </span><span style=color:#005cc5>urls</span><span style=color:#24292e>, </span><span style=color:#005cc5>links</span><span style=color:#24292e> } </span><span style=color:#d73a49>=</span><span style=color:#24292e> item</span></span>
<span class=line><span style=color:#d73a49>        return</span><span style=color:#24292e> { id, width, height, color, description, urls, links }</span></span>
<span class=line><span style=color:#24292e>      })</span></span>
<span class=line><span style=color:#24292e>      photosList.</span><span style=color:#6f42c1>push</span><span style=color:#24292e>(</span><span style=color:#d73a49>...</span><span style=color:#24292e>result)</span></span>
<span class=line><span style=color:#24292e>    }</span></span>
<span class=line><span style=color:#d73a49>    const</span><span style=color:#005cc5> today</span><span style=color:#d73a49> =</span><span style=color:#6f42c1> getToday</span><span style=color:#24292e>()</span></span>
<span class=line><span style=color:#d73a49>    const</span><span style=color:#005cc5> info</span><span style=color:#d73a49> =</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>      date: today,</span></span>
<span class=line><span style=color:#24292e>      num: photosList.</span><span style=color:#005cc5>length</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>      list: photosList</span></span>
<span class=line><span style=color:#24292e>    }</span></span>
<span class=line><span style=color:#d73a49>    const</span><span style=color:#005cc5> data</span><span style=color:#d73a49> =</span><span style=color:#005cc5> JSON</span><span style=color:#24292e>.</span><span style=color:#6f42c1>stringify</span><span style=color:#24292e>(info, </span><span style=color:#005cc5>null</span><span style=color:#24292e>, </span><span style=color:#032f62>'</span><span style=color:#005cc5>\t</span><span style=color:#032f62>'</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>    fs.</span><span style=color:#6f42c1>writeFileSync</span><span style=color:#24292e>(</span><span style=color:#032f62>`./unsplash/${</span><span style=color:#24292e>today</span><span style=color:#032f62>}.json`</span><span style=color:#24292e>, data)</span></span>
<span class=line><span style=color:#6f42c1>    logger</span><span style=color:#24292e>(</span><span style=color:#032f62>'定时获取Unsplash图片'</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>  } </span><span style=color:#d73a49>catch</span><span style=color:#24292e> (e) {</span></span>
<span class=line><span style=color:#6f42c1>    logger</span><span style=color:#24292e>(</span><span style=color:#032f62>'定时获取Unsplash图片'</span><span style=color:#24292e>, </span><span style=color:#005cc5>0</span><span style=color:#24292e>, e)</span></span>
<span class=line><span style=color:#24292e>  }</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#d73a49>...</span></span>
<span class=line><span style=color:#6a737d>// 获取今日图片</span></span>
<span class=line><span style=color:#24292e>router.</span><span style=color:#6f42c1>get</span><span style=color:#24292e>(</span><span style=color:#032f62>'/photos'</span><span style=color:#24292e>, </span><span style=color:#d73a49>async</span><span style=color:#e36209> ctx</span><span style=color:#d73a49> =></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#d73a49>  const</span><span style=color:#005cc5> fileList</span><span style=color:#d73a49> =</span><span style=color:#24292e> fs.</span><span style=color:#6f42c1>readdirSync</span><span style=color:#24292e>(</span><span style=color:#032f62>'./unsplash'</span><span style=color:#24292e>).</span><span style=color:#6f42c1>sort</span><span style=color:#24292e>((</span><span style=color:#e36209>a</span><span style=color:#24292e>, </span><span style=color:#e36209>b</span><span style=color:#24292e>) </span><span style=color:#d73a49>=></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#d73a49>    const</span><span style=color:#24292e> [</span><span style=color:#005cc5>date1</span><span style=color:#24292e>] </span><span style=color:#d73a49>=</span><span style=color:#24292e> a.</span><span style=color:#6f42c1>split</span><span style=color:#24292e>(</span><span style=color:#032f62>'.'</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#d73a49>    const</span><span style=color:#24292e> [</span><span style=color:#005cc5>date2</span><span style=color:#24292e>] </span><span style=color:#d73a49>=</span><span style=color:#24292e> b.</span><span style=color:#6f42c1>split</span><span style=color:#24292e>(</span><span style=color:#032f62>'.'</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#d73a49>    return</span><span style=color:#d73a49> new</span><span style=color:#6f42c1> Date</span><span style=color:#24292e>(date2) </span><span style=color:#d73a49>-</span><span style=color:#d73a49> new</span><span style=color:#6f42c1> Date</span><span style=color:#24292e>(date1)</span></span>
<span class=line><span style=color:#24292e>  })</span></span>
<span class=line><span style=color:#d73a49>  const</span><span style=color:#005cc5> latest</span><span style=color:#d73a49> =</span><span style=color:#24292e> fileList[</span><span style=color:#005cc5>0</span><span style=color:#24292e>]</span></span>
<span class=line><span style=color:#d73a49>  const</span><span style=color:#005cc5> txt</span><span style=color:#d73a49> =</span><span style=color:#24292e> fs.</span><span style=color:#6f42c1>readFileSync</span><span style=color:#24292e>(</span><span style=color:#032f62>`./unsplash/${</span><span style=color:#24292e>latest</span><span style=color:#032f62>}`</span><span style=color:#24292e>, </span><span style=color:#032f62>'utf-8'</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#d73a49>  try</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#d73a49>    const</span><span style=color:#005cc5> data</span><span style=color:#d73a49> =</span><span style=color:#005cc5> JSON</span><span style=color:#24292e>.</span><span style=color:#6f42c1>parse</span><span style=color:#24292e>(txt)</span></span>
<span class=line><span style=color:#24292e>    ctx.body </span><span style=color:#d73a49>=</span><span style=color:#24292e> r.</span><span style=color:#6f42c1>successData</span><span style=color:#24292e>(data)</span></span>
<span class=line><span style=color:#24292e>  } </span><span style=color:#d73a49>catch</span><span style=color:#24292e> (e) {</span></span>
<span class=line><span style=color:#24292e>    ctx.body </span><span style=color:#d73a49>=</span><span style=color:#24292e> r.</span><span style=color:#6f42c1>error</span><span style=color:#24292e>(</span><span style=color:#005cc5>308</span><span style=color:#24292e>, e)</span></span>
<span class=line><span style=color:#24292e>  }</span></span>
<span class=line><span style=color:#24292e>})</span></span>
<span class=line><span style=color:#d73a49>...</span></span>
<span class=line><span style=color:#6a737d>// 每天1点定时获取Unsplash图片保存JSON</span></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#6f42c1> runUnsplashSchedule</span><span style=color:#d73a49> =</span><span style=color:#24292e> () </span><span style=color:#d73a49>=></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>  schedule.</span><span style=color:#6f42c1>scheduleJob</span><span style=color:#24292e>(</span><span style=color:#032f62>'0 1 1 * * *'</span><span style=color:#24292e>, () </span><span style=color:#d73a49>=></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#6f42c1>    getUnsplashPhotos</span><span style=color:#24292e>()</span></span>
<span class=line><span style=color:#24292e>  })</span></span>
<span class=line><span style=color:#24292e>}</span></span>
<span class=line><span style=color:#6f42c1>runUnsplashSchedule</span><span style=color:#24292e>()</span></span>
<span class=line><span style=color:#d73a49>...</span></span></code></pre></section><h3 id=前端处理>前端处理</h3><p>前端使用 Vuex 保留用户每次切换获取的图片缓存，在不刷新页面下，同一张图片不需要再次加载。并将最后一次获取到的图片转成 Base64 保存到 Localstorage 里面的，此时要注意多数浏览器 Localstorage 最大存储 5M，需要做下判断，图片过大就不进行缓存了。</p><p>关于获取图片资源，一开始是使用 new Image()方案然后监听 onload 事件用 canvas 将 Img 转成 Base64 来实现。但是后面发现 canvas 将 Unsplash 图片转成 base64 会有跨域问题，尽管将<a href=https://www.jianshu.com/p/473cc1ec0b7e target=_blank>Img 的 crossOrigin 属性设成’anonymous’</a>，在 Chrome 下没问题，但是用 Safari 依然报跨域。最后采用了另外一种方案，使用 Ajax 去加载图片资源。需要将 responseType 改为 arraybuffer 方式，然后读取二进制拼接成 base64。使用 Ajax 方式还有一个优点，就是可以获取到加载进度，直接用 img 的 src 去获取无法监听图片下载进度。</p><p><strong>ajax 获取图片为 base64</strong></p><section class=byt-code-box><span class=byt-code-copy></span><pre class="astro-code github-light" data-language=js style=background-color:#fff;color:#24292e;overflow-x:auto tabindex=0><code><span class=line><span style=color:#6a737d>// ajax读取图片为base64</span></span>
<span class=line><span style=color:#6a737d>// processFn为监听进度的回调</span></span>
<span class=line><span style=color:#d73a49>export</span><span style=color:#d73a49> const</span><span style=color:#6f42c1> getBase64ByAjax</span><span style=color:#d73a49> =</span><span style=color:#24292e> (</span><span style=color:#e36209>url</span><span style=color:#24292e>, </span><span style=color:#e36209>formatter</span><span style=color:#d73a49> =</span><span style=color:#032f62> "image/png"</span><span style=color:#24292e>, </span><span style=color:#e36209>processFn</span><span style=color:#24292e>) </span><span style=color:#d73a49>=></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#d73a49>  return</span><span style=color:#d73a49> new</span><span style=color:#005cc5> Promise</span><span style=color:#24292e>((</span><span style=color:#e36209>resolve</span><span style=color:#24292e>, </span><span style=color:#e36209>reject</span><span style=color:#24292e>) </span><span style=color:#d73a49>=></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#d73a49>    const</span><span style=color:#005cc5> xhr</span><span style=color:#d73a49> =</span><span style=color:#d73a49> new</span><span style=color:#6f42c1> XMLHttpRequest</span><span style=color:#24292e>();</span></span>
<span class=line><span style=color:#24292e>    xhr.</span><span style=color:#6f42c1>open</span><span style=color:#24292e>(</span><span style=color:#032f62>"GET"</span><span style=color:#24292e>, url, </span><span style=color:#005cc5>true</span><span style=color:#24292e>);</span></span>
<span class=line><span style=color:#24292e>    xhr.responseType </span><span style=color:#d73a49>=</span><span style=color:#032f62> "arraybuffer"</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#24292e>    xhr.</span><span style=color:#6f42c1>onload</span><span style=color:#d73a49> =</span><span style=color:#24292e> (</span><span style=color:#e36209>e</span><span style=color:#24292e>) </span><span style=color:#d73a49>=></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#d73a49>      if</span><span style=color:#24292e> (xhr.status </span><span style=color:#d73a49>===</span><span style=color:#005cc5> 200</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#d73a49>        const</span><span style=color:#005cc5> uInt8Array</span><span style=color:#d73a49> =</span><span style=color:#d73a49> new</span><span style=color:#6f42c1> Uint8Array</span><span style=color:#24292e>(xhr.response);</span></span>
<span class=line><span style=color:#d73a49>        let</span><span style=color:#24292e> i </span><span style=color:#d73a49>=</span><span style=color:#24292e> uInt8Array.</span><span style=color:#005cc5>length</span><span style=color:#24292e>;</span></span>
<span class=line><span style=color:#d73a49>        const</span><span style=color:#005cc5> binaryString</span><span style=color:#d73a49> =</span><span style=color:#d73a49> new</span><span style=color:#6f42c1> Array</span><span style=color:#24292e>(i);</span></span>
<span class=line><span style=color:#d73a49>        while</span><span style=color:#24292e> (i</span><span style=color:#d73a49>--</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>          binaryString[i] </span><span style=color:#d73a49>=</span><span style=color:#24292e> String.</span><span style=color:#6f42c1>fromCharCode</span><span style=color:#24292e>(uInt8Array[i]);</span></span>
<span class=line><span style=color:#24292e>        }</span></span>
<span class=line><span style=color:#d73a49>        const</span><span style=color:#005cc5> data</span><span style=color:#d73a49> =</span><span style=color:#24292e> binaryString.</span><span style=color:#6f42c1>join</span><span style=color:#24292e>(</span><span style=color:#032f62>""</span><span style=color:#24292e>);</span></span>
<span class=line><span style=color:#d73a49>        const</span><span style=color:#005cc5> base64</span><span style=color:#d73a49> =</span><span style=color:#24292e> window.</span><span style=color:#6f42c1>btoa</span><span style=color:#24292e>(data);</span></span>
<span class=line><span style=color:#d73a49>        const</span><span style=color:#005cc5> dataURL</span><span style=color:#d73a49> =</span></span>
<span class=line><span style=color:#032f62>          "data:"</span><span style=color:#d73a49> +</span><span style=color:#24292e> (formatter </span><span style=color:#d73a49>||</span><span style=color:#032f62> "image/png"</span><span style=color:#24292e>) </span><span style=color:#d73a49>+</span><span style=color:#032f62> ";base64,"</span><span style=color:#d73a49> +</span><span style=color:#24292e> base64;</span></span>
<span class=line><span style=color:#6f42c1>        resolve</span><span style=color:#24292e>(dataURL);</span></span>
<span class=line><span style=color:#24292e>      }</span></span>
<span class=line><span style=color:#24292e>    };</span></span>
<span class=line><span style=color:#24292e>    xhr.</span><span style=color:#6f42c1>onerror</span><span style=color:#d73a49> =</span><span style=color:#24292e> (</span><span style=color:#e36209>e</span><span style=color:#24292e>) </span><span style=color:#d73a49>=></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#6f42c1>      reject</span><span style=color:#24292e>(e);</span></span>
<span class=line><span style=color:#24292e>    };</span></span>
<span class=line><span style=color:#24292e>    xhr.</span><span style=color:#6f42c1>onprogress</span><span style=color:#d73a49> =</span><span style=color:#24292e> (</span><span style=color:#e36209>e</span><span style=color:#24292e>) </span><span style=color:#d73a49>=></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>      processFn </span><span style=color:#d73a49>&#x26;&#x26;</span><span style=color:#6f42c1> processFn</span><span style=color:#24292e>(e);</span></span>
<span class=line><span style=color:#24292e>    };</span></span>
<span class=line><span style=color:#24292e>    xhr.</span><span style=color:#6f42c1>send</span><span style=color:#24292e>();</span></span>
<span class=line><span style=color:#24292e>  });</span></span>
<span class=line><span style=color:#24292e>};</span></span></code></pre></section><p><strong>Vuex 记录图片加载及其缓存</strong></p><section class=byt-code-box><span class=byt-code-copy></span><pre class="astro-code github-light" data-language=js style=background-color:#fff;color:#24292e;overflow-x:auto tabindex=0><code><span class=line><span style=color:#d73a49>export</span><span style=color:#d73a49> default</span><span style=color:#d73a49> new</span><span style=color:#24292e> Vuex.</span><span style=color:#6f42c1>Store</span><span style=color:#24292e>({</span></span>
<span class=line><span style=color:#24292e>  state: {</span></span>
<span class=line><span style=color:#6a737d>    // ... //</span></span>
<span class=line><span style=color:#24292e>    unsplashImgList: [],</span></span>
<span class=line><span style=color:#24292e>    downloadingImgInfo: </span><span style=color:#005cc5>null</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>    downloadingImgBase64: </span><span style=color:#032f62>""</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>    downloadingProcess: </span><span style=color:#005cc5>0</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>    cacheImg: {},</span></span>
<span class=line><span style=color:#6a737d>    // ... //</span></span>
<span class=line><span style=color:#24292e>  },</span></span>
<span class=line><span style=color:#24292e>  mutations: {</span></span>
<span class=line><span style=color:#6a737d>    // ... //</span></span>
<span class=line><span style=color:#6f42c1>    setEngineList</span><span style=color:#24292e>(</span><span style=color:#e36209>state</span><span style=color:#24292e>, </span><span style=color:#e36209>engineList</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>      state.engineList </span><span style=color:#d73a49>=</span><span style=color:#24292e> engineList;</span></span>
<span class=line><span style=color:#24292e>    },</span></span>
<span class=line><span style=color:#6f42c1>    setBackupEngineList</span><span style=color:#24292e>(</span><span style=color:#e36209>state</span><span style=color:#24292e>, </span><span style=color:#e36209>backupEngineList</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>      state.backupEngineList </span><span style=color:#d73a49>=</span><span style=color:#24292e> backupEngineList;</span></span>
<span class=line><span style=color:#24292e>    },</span></span>
<span class=line><span style=color:#6f42c1>    setUnsplashImgList</span><span style=color:#24292e>(</span><span style=color:#e36209>state</span><span style=color:#24292e>, </span><span style=color:#e36209>unsplashImgList</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>      state.unsplashImgList </span><span style=color:#d73a49>=</span><span style=color:#24292e> unsplashImgList;</span></span>
<span class=line><span style=color:#24292e>    },</span></span>
<span class=line><span style=color:#6f42c1>    setDownloadingImgInfo</span><span style=color:#24292e>(</span><span style=color:#e36209>state</span><span style=color:#24292e>, </span><span style=color:#e36209>downloadingImgInfo</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>      state.downloadingImgInfo </span><span style=color:#d73a49>=</span><span style=color:#24292e> downloadingImgInfo;</span></span>
<span class=line><span style=color:#24292e>    },</span></span>
<span class=line><span style=color:#6f42c1>    setDownloadingProcess</span><span style=color:#24292e>(</span><span style=color:#e36209>state</span><span style=color:#24292e>, </span><span style=color:#e36209>downloadingProcess</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>      state.downloadingProcess </span><span style=color:#d73a49>=</span><span style=color:#24292e> downloadingProcess;</span></span>
<span class=line><span style=color:#24292e>    },</span></span>
<span class=line><span style=color:#6f42c1>    setDownloadingImgBase64</span><span style=color:#24292e>(</span><span style=color:#e36209>state</span><span style=color:#24292e>, </span><span style=color:#e36209>base64</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>      document.body.style.</span><span style=color:#6f42c1>setProperty</span><span style=color:#24292e>(</span></span>
<span class=line><span style=color:#032f62>        "--textColor"</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>        base64 </span><span style=color:#d73a49>?</span><span style=color:#032f62> "#f8f8f9"</span><span style=color:#d73a49> :</span><span style=color:#032f62> "#262626"</span></span>
<span class=line><span style=color:#24292e>      );</span></span>
<span class=line><span style=color:#24292e>      document.body.style.</span><span style=color:#6f42c1>setProperty</span><span style=color:#24292e>(</span></span>
<span class=line><span style=color:#032f62>        "--textShadowColor"</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>        base64 </span><span style=color:#d73a49>?</span><span style=color:#032f62> "#262626"</span><span style=color:#d73a49> :</span><span style=color:#032f62> "transparent"</span></span>
<span class=line><span style=color:#24292e>      );</span></span>
<span class=line><span style=color:#24292e>      state.downloadingImgBase64 </span><span style=color:#d73a49>=</span><span style=color:#24292e> base64;</span></span>
<span class=line><span style=color:#d73a49>      const</span><span style=color:#005cc5> userTodayImgCache</span><span style=color:#d73a49> =</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>        date: </span><span style=color:#6f42c1>getToday</span><span style=color:#24292e>(),</span></span>
<span class=line><span style=color:#24292e>        base64,</span></span>
<span class=line><span style=color:#24292e>      };</span></span>
<span class=line><span style=color:#d73a49>      const</span><span style=color:#005cc5> toJson</span><span style=color:#d73a49> =</span><span style=color:#005cc5> JSON</span><span style=color:#24292e>.</span><span style=color:#6f42c1>stringify</span><span style=color:#24292e>(userTodayImgCache);</span></span>
<span class=line><span style=color:#d73a49>      if</span><span style=color:#24292e> (toJson.</span><span style=color:#005cc5>length</span><span style=color:#d73a49> &#x3C;</span><span style=color:#005cc5> 3.5</span><span style=color:#d73a49> *</span><span style=color:#005cc5> 1024</span><span style=color:#d73a49> *</span><span style=color:#005cc5> 1024</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>        localStorage.</span><span style=color:#6f42c1>setItem</span><span style=color:#24292e>(</span></span>
<span class=line><span style=color:#032f62>          "userTodayImgCache"</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#005cc5>          JSON</span><span style=color:#24292e>.</span><span style=color:#6f42c1>stringify</span><span style=color:#24292e>(userTodayImgCache)</span></span>
<span class=line><span style=color:#24292e>        );</span></span>
<span class=line><span style=color:#24292e>      }</span></span>
<span class=line><span style=color:#24292e>    },</span></span>
<span class=line><span style=color:#6f42c1>    setCacheImg</span><span style=color:#24292e>(</span><span style=color:#e36209>state</span><span style=color:#24292e>, { </span><span style=color:#e36209>imgId</span><span style=color:#24292e>, </span><span style=color:#e36209>base64</span><span style=color:#24292e> }) {</span></span>
<span class=line><span style=color:#24292e>      state.cacheImg </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#d73a49>        ...</span><span style=color:#24292e>state.cacheImg,</span></span>
<span class=line><span style=color:#24292e>        [imgId]: base64,</span></span>
<span class=line><span style=color:#24292e>      };</span></span>
<span class=line><span style=color:#24292e>    },</span></span>
<span class=line><span style=color:#6a737d>    // ... //</span></span>
<span class=line><span style=color:#24292e>  },</span></span>
<span class=line><span style=color:#24292e>  actions: {</span></span>
<span class=line><span style=color:#6a737d>    // ... //</span></span>
<span class=line><span style=color:#6f42c1>    getDownloadingImg</span><span style=color:#24292e>({ </span><span style=color:#e36209>commit</span><span style=color:#24292e>, </span><span style=color:#e36209>state</span><span style=color:#24292e> }, </span><span style=color:#e36209>downloadingImg</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#d73a49>      const</span><span style=color:#005cc5> imgId</span><span style=color:#d73a49> =</span><span style=color:#24292e> downloadingImg.id;</span></span>
<span class=line><span style=color:#d73a49>      if</span><span style=color:#24292e> (state.cacheImg[imgId]) {</span></span>
<span class=line><span style=color:#6f42c1>        commit</span><span style=color:#24292e>(</span><span style=color:#032f62>"setDownloadingImgBase64"</span><span style=color:#24292e>, state.cacheImg[imgId]);</span></span>
<span class=line><span style=color:#24292e>      } </span><span style=color:#d73a49>else</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#d73a49>        let</span><span style=color:#24292e> imgURL;</span></span>
<span class=line><span style=color:#d73a49>        if</span><span style=color:#24292e> (document.body.clientWidth </span><span style=color:#d73a49>>=</span><span style=color:#005cc5> 1440</span><span style=color:#24292e>) {</span></span>
<span class=line><span style=color:#24292e>          imgURL </span><span style=color:#d73a49>=</span><span style=color:#24292e> downloadingImg.urls.regular</span></span>
<span class=line><span style=color:#24292e>            .</span><span style=color:#6f42c1>replace</span><span style=color:#24292e>(</span><span style=color:#032f62>"w=1080"</span><span style=color:#24292e>, </span><span style=color:#032f62>"w=1920"</span><span style=color:#24292e>)</span></span>
<span class=line><span style=color:#24292e>            .</span><span style=color:#6f42c1>replace</span><span style=color:#24292e>(</span><span style=color:#032f62>"q=80"</span><span style=color:#24292e>, </span><span style=color:#032f62>"q=70"</span><span style=color:#24292e>);</span></span>
<span class=line><span style=color:#24292e>        } </span><span style=color:#d73a49>else</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>          imgURL </span><span style=color:#d73a49>=</span><span style=color:#24292e> downloadingImg.urls.regular.</span><span style=color:#6f42c1>replace</span><span style=color:#24292e>(</span><span style=color:#032f62>"q=80"</span><span style=color:#24292e>, </span><span style=color:#032f62>"q=70"</span><span style=color:#24292e>);</span></span>
<span class=line><span style=color:#24292e>        }</span></span>
<span class=line><span style=color:#6f42c1>        commit</span><span style=color:#24292e>(</span><span style=color:#032f62>"setDownloadingImgInfo"</span><span style=color:#24292e>, downloadingImg);</span></span>
<span class=line><span style=color:#6f42c1>        commit</span><span style=color:#24292e>(</span><span style=color:#032f62>"setDownloadingProcess"</span><span style=color:#24292e>, </span><span style=color:#005cc5>0</span><span style=color:#24292e>);</span></span>
<span class=line><span style=color:#d73a49>        const</span><span style=color:#6f42c1> processFn</span><span style=color:#d73a49> =</span><span style=color:#24292e> (</span><span style=color:#e36209>e</span><span style=color:#24292e>) </span><span style=color:#d73a49>=></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#d73a49>          const</span><span style=color:#005cc5> process</span><span style=color:#d73a49> =</span><span style=color:#d73a49> ~~</span><span style=color:#24292e>((e.loaded </span><span style=color:#d73a49>/</span><span style=color:#24292e> e.total) </span><span style=color:#d73a49>*</span><span style=color:#005cc5> 100</span><span style=color:#24292e>);</span></span>
<span class=line><span style=color:#6f42c1>          commit</span><span style=color:#24292e>(</span><span style=color:#032f62>"setDownloadingProcess"</span><span style=color:#24292e>, process);</span></span>
<span class=line><span style=color:#24292e>        };</span></span>
<span class=line><span style=color:#6f42c1>        getBase64ByAjax</span><span style=color:#24292e>(imgURL, </span><span style=color:#032f62>"image/png"</span><span style=color:#24292e>, processFn).</span><span style=color:#6f42c1>then</span><span style=color:#24292e>((</span><span style=color:#e36209>data</span><span style=color:#24292e>) </span><span style=color:#d73a49>=></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#d73a49>          const</span><span style=color:#005cc5> dataURL</span><span style=color:#d73a49> =</span><span style=color:#24292e> data;</span></span>
<span class=line><span style=color:#6f42c1>          commit</span><span style=color:#24292e>(</span><span style=color:#032f62>"setDownloadingImgBase64"</span><span style=color:#24292e>, dataURL);</span></span>
<span class=line><span style=color:#6f42c1>          commit</span><span style=color:#24292e>(</span><span style=color:#032f62>"setCacheImg"</span><span style=color:#24292e>, { imgId, base64: dataURL });</span></span>
<span class=line><span style=color:#6f42c1>          commit</span><span style=color:#24292e>(</span><span style=color:#032f62>"setDownloadingImgInfo"</span><span style=color:#24292e>, </span><span style=color:#005cc5>null</span><span style=color:#24292e>);</span></span>
<span class=line><span style=color:#24292e>        });</span></span>
<span class=line><span style=color:#24292e>      }</span></span>
<span class=line><span style=color:#24292e>    },</span></span>
<span class=line><span style=color:#6a737d>    // ... //</span></span>
<span class=line><span style=color:#24292e>  },</span></span>
<span class=line><span style=color:#24292e>});</span></span></code></pre></section><p><img alt=背景切换展示 src=/assets/images/lazy-loading.webp data-byt-lz-src=https://cdn.kongfandong.cn/img/blog/leuj5U6YL7GzDZo.gif class=byt-article-img></p><p><em>当前并未实现自定义图片上传功能，后续进行优化</em></p><h2 id=配置同步功能>配置同步功能</h2><p>该功能未在线上版本实现，但已有实现思路。</p><ol><li>方案一：用户注册账号，登录后自动同步配置。该方案为传统方案，但是系统功能单一，用上账户功能对用户来说是过于麻烦，而且涉及到账号安全问题。（不推荐）</li><li>方案二：用户点击保存配置按钮后生成一串 AccessKey 随机字符串，在另一端设备用户输入该字符串发送请求，后端返回改字符串对应的配置信息。随机字符串生成后有效期为 24 小时，后端定时删除。（推荐）</li><li>方案三：导出 json 文件进行同步。（不推荐）</li></ol><h2 id=关于优化>关于优化</h2><h3 id=打包优化>打包优化</h3><p>项目使用到的 vue、vuex 等资源使用线上 CDN 服务，可减少打包大小并减轻服务端带宽压力。使用 Vue-cli3 的项目在 vue.config.js 中加入 externals 配置，不打包 vue 相关资源，并在 index.html 加入 Vue CDN 资源。</p><section class=byt-code-box><span class=byt-code-copy></span><pre class="astro-code github-light" data-language=js style=background-color:#fff;color:#24292e;overflow-x:auto tabindex=0><code><span class=line><span style=color:#6a737d>// vue.config.js</span></span>
<span class=line><span style=color:#005cc5>module</span><span style=color:#24292e>.</span><span style=color:#005cc5>exports</span><span style=color:#d73a49> =</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#6a737d>  // ...</span></span>
<span class=line><span style=color:#6f42c1>  configureWebpack</span><span style=color:#24292e>: (</span><span style=color:#e36209>config</span><span style=color:#24292e>) </span><span style=color:#d73a49>=></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>    config.externals </span><span style=color:#d73a49>=</span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#24292e>      vue: </span><span style=color:#032f62>"Vue"</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>      vuex: </span><span style=color:#032f62>"Vuex"</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#6a737d>      // 'vue-router': 'VueRouter',</span></span>
<span class=line><span style=color:#6a737d>      // axios: 'axios'</span></span>
<span class=line><span style=color:#24292e>    };</span></span>
<span class=line><span style=color:#24292e>  },</span></span>
<span class=line><span style=color:#6a737d>  // ...</span></span>
<span class=line><span style=color:#24292e>};</span></span></code></pre></section><p><em>因系统功能完全是单页面完成，删除了 vue-router 功能，涉及请求不多也将 axios 改为原生 ajax 实现</em></p><h3 id=图片优化>图片优化</h3><ol><li>由于 Unsplash 为境外站点，国内访问有可能速度很慢。可以考虑在 nodejs 进行获取图片请求后，再将每张图片保存到本地。或者为了减轻服务器带宽压力，可以将图片上传到七牛云或腾讯云的提供的图片资源服务。</li><li>Unsplash 提供的图片 api 接口，可以判断当前用户的设备，例如区分手机端和 PC 端，然后更改请求部分参数使其返回不同大小的图片。</li><li>将图片缓存到浏览器中。</li></ol><p>系统半成品已部署与线上，在线访问：<a href=https://howdz.xyz target=_blank></a><a href=https://howdz.xyz target=_blank rel="noopener nofollow"><span>https://howdz.xyz</span></a></p><p><em>以上内容未经授权请勿随意转载。</em></p><section class=tag-list></section></main><footer><section class=byt-copyright><p>本文由 <span>boycot</span> 于 2020-04-04 凌晨 发布</p><p>文章地址：<a href=https://astro-blog.boycot.top/article/浏览器导航首页设计>浏览器导航首页设计</a></p><p>本博客所有文章除特别声明外，均采用 <a href=https://creativecommons.org/licenses/by-nc-sa/4.0 target=_blank rel="noopener nofollow">CC BY-NC-SA 4.0</a> 许可协议。完整转载请注明来自 <a href=https://astro-blog.boycot.top>boycot</a>！</p><svg viewBox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><path d="M245.8 214.9l-33.2 17.3c-9.4-19.6-25.2-19.9-27.5-19.9-22.1 0-33.2 14.6-33.2 43.8 0 23.6 9.2 43.8 33.2 43.8 14.5 0 24.7-7.1 30.6-21.3l30.6 15.5c-6.2 11.5-25.7 39-65.1 39-22.6 0-74-10.3-74-77.1 0-58.7 43-77.1 72.6-77.1 30.7 0 52.7 12 66 35.9zm143.1 0l-32.8 17.3c-9.5-19.8-25.7-19.9-27.9-19.9-22.1 0-33.2 14.6-33.2 43.8 0 23.6 9.2 43.8 33.2 43.8 14.5 0 24.7-7.1 30.5-21.3l31 15.5c-2.1 3.8-21.4 39-65.1 39-22.7 0-74-9.9-74-77.1 0-58.7 43-77.1 72.6-77.1 30.7 0 52.6 12 65.6 35.9zM247.6 8.1C104.7 8.1 0 123.1 0 256.1c0 138.5 113.6 248 247.6 248 129.9 0 248.4-100.9 248.4-248 0-137.9-106.6-248-248.4-248zm.9 450.8c-112.5 0-203.7-93-203.7-202.8 0-105.4 85.4-203.3 203.7-203.3 112.5 0 202.8 89.5 202.8 203.3 0 121.7-99.7 202.8-202.8 202.8z"></path></svg></section></footer><section class=byt-comment><section><section class=byt-space-loading><span></span><span></span><span></span></section></section></section></article></section><aside class=byt-aside><section class="byt-aside-item user"><img alt=boycot src=/assets/images/lazy-loading.webp data-byt-lz-src=https://boycot2015.github.io/picx-images-hosting/avatar/avatar.7pnvyzg2f.webp class=byt-aside-avatar> <span class=byt-aside-auther>boycot</span><p class=byt-aside-motto>越努力越幸运.</p><section class=byt-aside-links><a href=https://github.com/boycot2015 target=_blank class=byt-aside-links-item rel="noopener nofollow" title=Github><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=3 class="icon icon-tabler icons-tabler-outline icon-tabler-brand-github"><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"/></svg> </a><a href=https://api.boycot.top target=_blank class=byt-aside-links-item rel="noopener nofollow" title=boycotAPI><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24 class="icon icon-tabler icons-tabler-outline icon-tabler-api"><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M4 13h5"/><path d="M12 16v-8h3a2 2 0 0 1 2 2v1a2 2 0 0 1 -2 2h-3"/><path d="M20 8v8"/><path d="M9 16v-5.5a2.5 2.5 0 0 0 -5 0v5.5"/></svg> </a><a href=https://news.boycot.top target=_blank class=byt-aside-links-item rel="noopener nofollow" title=每日热榜><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 height=24 width=24 class="icon icon-tabler icons-tabler-outline icon-tabler-brand-tinder"><path d="M0 0h24v24H0z" fill=none stroke=none /><path d="M18.918 8.174c2.56 4.982 .501 11.656 -5.38 12.626c-7.702 1.687 -12.84 -7.716 -7.054 -13.229c.309 -.305 1.161 -1.095 1.516 -1.349c0 .528 .27 3.475 1 3.167c3 0 4 -4.222 3.587 -7.389c2.7 1.411 4.987 3.376 6.331 6.174z"/></svg></a></section><section class=byt-aside-info><div class="count art-item"><span>38</span><p>文章数</p></div><div class="count cat-item"><span>16</span><p>分类数</p></div><div class="count tag-item"><span>24</span><p>标签数</p></div></section><canvas class=byt-aside-canvas height=1888 width=888></canvas></section><section class="byt-aside-item tips"><span><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M0 0h24v24H0z" fill=none stroke=none></path><path d="M3 9.662c2 2.338 2 4.338 0 6.338c3 .5 4.5 1 5 4c2 -3 6 -4 9 0c0 -3 1 -4 4 -4.004q -3 -2.995 0 -5.996c-3 0 -5 -2 -5 -5c-2 4 -5 3 -7.5 -1c-.5 3 -2.5 5 -5.5 5.662"></path></svg> 公告</span><div class=tips-content><p>欢迎光临我的博客 🎉</p><p>这里会分享我的日常和学习中的收集、整理及总结，希望能对你有所帮助:) 💖</p></div></section><section class="byt-aside-item cat"><h3>分类</h3><div class=byt-aside-cat><a href=/categories/框架><span>框架</span> <i>4</i> </a><a href=/categories/游戏><span>游戏</span> <i>2</i> </a><a href=/categories/php><span>php</span> <i>1</i> </a><a href=/categories/css><span>css</span> <i>1</i> </a><a href=/categories/equb.js><span>equb.js</span> <i>1</i> </a><a href=/categories/阅读><span>阅读</span> <i>1</i> </a><a href=/categories/ai><span>ai</span> <i>1</i> </a><a href=/categories/typecho><span>typecho</span> <i>1</i> </a><a href=/categories/hexo主题><span>hexo主题</span> <i>1</i> </a><a href=/categories/Nodejs><span>Nodejs</span> <i>1</i> </a><a href=/categories/ssh><span>ssh</span> <i>1</i> </a><a href=/categories/element-plus主题><span>element-plus主题</span> <i>1</i> </a><a href=/categories/工具><span>工具</span> <i>1</i> </a><a href=/categories/astrojs><span>astrojs</span> <i>1</i> </a><a href=/categories/魅族><span>魅族</span> <i>1</i> </a><a href=/categories/动画><span>动画</span> <i>1</i></a></div></section><section class="byt-aside-item tags"><h3>热门标签</h3><div class=byt-aside-tags><a href=/tag/javascript><span>javascript</span> <em>5</em> </a><a href=/tag/astro><span>astro</span> <em>3</em> </a><a href=/tag/ai><span>ai</span> <em>2</em> </a><a href=/tag/游戏><span>游戏</span> <em>2</em> </a><a href=/tag/php><span>php</span> <em>1</em> </a><a href=/tag/css><span>css</span> <em>1</em> </a><a href=/tag/ellipsis><span>ellipsis</span> <em>1</em> </a><a href=/tag/equb.js><span>equb.js</span> <em>1</em> </a><a href=/tag/NestJS><span>NestJS</span> <em>1</em> </a><a href=/tag/NuxtJS><span>NuxtJS</span> <em>1</em> </a><a href=/tag/NextJS><span>NextJS</span> <em>1</em> </a><a href=/tag/aplayer><span>aplayer</span> <em>1</em> </a><a href=/tag/Typecho><span>Typecho</span> <em>1</em> </a><a href=/tag/hexo><span>hexo</span> <em>1</em> </a><a href=/tag/Node><span>Node</span> <em>1</em> </a><a href=/tag/ssh><span>ssh</span> <em>1</em> </a><a href=/tag/element-plus><span>element-plus</span> <em>1</em> </a><a href=/tag/主题><span>主题</span> <em>1</em> </a><a href=/tag/vue3><span>vue3</span> <em>1</em> </a><a href=/tag/魅族21><span>魅族21</span> <em>1</em> </a><a href=/tag/动画><span>动画</span> <em>1</em> </a><a href=/tag/element-ui><span>element-ui</span> <em>1</em> </a><a href=/tag/test><span>test</span> <em>1</em> </a><a href=/tag/markdown><span>markdown</span> <em>1</em></a></div></section><section class=sticky-aside><section class="byt-aside-item articles"><h3>推荐文章</h3><div class=byt-aside-articles><a href=/article/本地php环境安装><span><i>1</i> <cite class=byt-ellipsis>本地php环境安装</cite> </span><time>2025-03-12 中午</time> </a><a href=/article/css文本超出一定范围后显示省略号><span><i>2</i> <cite class=byt-ellipsis>css文本超出一定范围后显示省略号</cite> </span><time>2025-03-11 凌晨</time> </a><a href=/article/使用epub.js解析epub文件><span><i>3</i> <cite class=byt-ellipsis>使用epub.js解析epub文件</cite> </span><time>2025-02-25 中午</time> </a><a href=/article/《毛概》读后感><span><em>4.</em> <cite class=byt-ellipsis>《毛概》读后感</cite> </span><time>2025-02-17 下午</time> </a><a href=/article/NestJS入门指南><span><em>5.</em> <cite class=byt-ellipsis>NestJS入门指南</cite> </span><time>2025-02-17 凌晨</time> </a><a href=/article/js实现贪吃蛇游戏><span><em>6.</em> <cite class=byt-ellipsis>js实现贪吃蛇游戏</cite> </span><time>2025-02-17 凌晨</time></a></div></section></section></aside></section><section class=byt-back-top><svg viewBox="0 0 24 24"><defs><linearGradient id=Gradient x1=0% x2=100% y1=0% y2=0%><stop offset=0% style=stop-color:blue;stop-opacity:1></stop><stop offset=50% style=stop-color:violet;stop-opacity:1></stop><stop offset=100% style=stop-color:indigo;stop-opacity:1></stop></linearGradient></defs><circle cx=12 cy=12 fill=none r=10 stroke=url(#Gradient) stroke-linecap=round stroke-width=2 transform="rotate(-90, 12, 12)"></circle></svg> <svg viewBox="0 0 24 24" class=icon><path d="m6 15l6-6l6 6" fill=none stroke=#000 stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></section></main><footer class=byt-footer><main><p></p><p><span><svg viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M269.4 2.9C265.2 1 260.7 0 256 0s-9.2 1-13.4 2.9L54.3 82.8c-22 9.3-38.4 31-38.3 57.2c.5 99.2 41.3 280.7 213.6 363.2c16.7 8 36.1 8 52.8 0C454.7 420.7 495.5 239.2 496 140c.1-26.2-16.3-47.9-38.3-57.2L269.4 2.9zM144 221.3c0-33.8 27.4-61.3 61.3-61.3c16.2 0 31.8 6.5 43.3 17.9l7.4 7.4 7.4-7.4c11.5-11.5 27.1-17.9 43.3-17.9c33.8 0 61.3 27.4 61.3 61.3c0 16.2-6.5 31.8-17.9 43.3l-82.7 82.7c-6.2 6.2-16.4 6.2-22.6 0l-82.7-82.7c-11.5-11.5-17.9-27.1-17.9-43.3z" fill=#fff></path></svg><cite>稳定运行</cite><em class=web_time></em></span><a href=https://astro.build/ target=_blank rel="noopener noreferrer"><img alt=Astro src=/assets/images/footer/astro.svg></a><a href=https://github.com/uxiaohan/bytAstro-Theme target=_blank rel="noopener noreferrer"><img alt=bytAstro-Theme src=/assets/images/footer/theme.svg></a><a href=/sitemap-index.xml target=_blank><img alt=sitemap src=/assets/images/footer/sitemap.svg></a><a href=/rss.xml target=_blank><img alt=rss src=/assets/images/footer/rss.svg></a><a href=https://beian.miit.gov.cn/ target=_blank rel="noopener noreferrer"><img alt=粤ICP备18002072号 src=https://img.shields.io/badge/%E7%B2%A4ICP%E5%A4%87-18002072%E5%8F%B7-red></a></p></main></footer><script src=/./js/Layout.astro_astro_type_script_index_0_lang-BZu2cAfq.js type=module></script></body></html>