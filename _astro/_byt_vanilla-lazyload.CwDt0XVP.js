const _=typeof window<"u",S=_&&!("onscroll"in window)||typeof navigator<"u"&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),J=_&&window.devicePixelRatio>1,be={elements_selector:".lazy",container:S||_?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},P=e=>Object.assign({},be,e),H=function(e,t){let a;const s="LazyLoad::Initialized",o=new e(t);try{a=new CustomEvent(s,{detail:{instance:o}})}catch{a=document.createEvent("CustomEvent"),a.initCustomEvent(s,!1,!1,{instance:o})}window.dispatchEvent(a)},he=(e,t)=>{if(t)if(t.length)for(let a,s=0;a=t[s];s+=1)H(e,a);else H(e,t)},r="src",O="srcset",C="sizes",U="poster",f="llOriginalAttrs",q="data",M="loading",K="loaded",Q="applied",me="entered",N="error",W="native",X="data-",Y="ll-status",o=(e,t)=>e.getAttribute(X+t),fe=(e,t,a)=>{const s=X+t;null!==a?e.setAttribute(s,a):e.removeAttribute(s)},p=e=>o(e,Y),$=(e,t)=>fe(e,Y,t),I=e=>$(e,null),z=e=>null===p(e),pe=e=>p(e)===M,ve=e=>p(e)===N,R=e=>p(e)===W,Ee=[M,K,Q,N],Ie=e=>Ee.indexOf(p(e))>=0,u=(e,t,a,s)=>{e&&"function"==typeof e&&(void 0===s?void 0===a?e(t):e(t,a):e(t,a,s))},h=(e,t)=>{_&&""!==t&&e.classList.add(t)},c=(e,t)=>{_&&""!==t&&e.classList.remove(t)},ke=e=>{e.llTempImage=document.createElement("IMG")},Ae=e=>{delete e.llTempImage},Z=e=>e.llTempImage,k=(e,t)=>{if(!t)return;const a=t._observer;a&&a.unobserve(e)},ye=e=>{e.disconnect()},Le=(e,t,a)=>{t.unobserve_entered&&k(e,a)},T=(e,t)=>{e&&(e.loadingCount+=t)},we=e=>{e&&(e.toLoadCount-=1)},ee=(e,t)=>{e&&(e.toLoadCount=t)},xe=e=>e.loadingCount>0,Oe=e=>e.toLoadCount>0,te=e=>{let t=[];for(let a,s=0;a=e.children[s];s+=1)"SOURCE"===a.tagName&&t.push(a);return t},D=(e,t)=>{const a=e.parentNode;a&&"PICTURE"===a.tagName&&te(a).forEach(t)},ne=(e,t)=>{te(e).forEach(t)},A=[r],se=[r,U],m=[r,O,C],ae=[q],y=e=>!!e[f],le=e=>e[f],oe=e=>delete e[f],b=(e,t)=>{if(y(e))return;const a={};t.forEach((t=>{a[t]=e.getAttribute(t)})),e[f]=a},Ce=e=>{y(e)||(e[f]={backgroundImage:e.style.backgroundImage})},g=(e,t)=>{if(!y(e))return;const a=le(e);t.forEach((t=>{var s,o,l;s=e,o=t,(l=a[t])?s.setAttribute(o,l):s.removeAttribute(o)}))},Me=e=>{if(!y(e))return;const t=le(e);e.style.backgroundImage=t.backgroundImage},ce=(e,t,a)=>{h(e,t.class_applied),$(e,Q),a&&(t.unobserve_completed&&k(e,t),u(t.callback_applied,e,a))},re=(e,t,a)=>{h(e,t.class_loading),$(e,M),a&&(T(a,1),u(t.callback_loading,e,a))},d=(e,t,a)=>{a&&e.setAttribute(t,a)},V=(e,t)=>{d(e,C,o(e,t.data_sizes)),d(e,O,o(e,t.data_srcset)),d(e,r,o(e,t.data_src))},Ne=(e,t)=>{D(e,(e=>{b(e,m),V(e,t)})),b(e,m),V(e,t)},ze=(e,t)=>{b(e,A),d(e,r,o(e,t.data_src))},Re=(e,t)=>{ne(e,(e=>{b(e,A),d(e,r,o(e,t.data_src))})),b(e,se),d(e,U,o(e,t.data_poster)),d(e,r,o(e,t.data_src)),e.load()},Te=(e,t)=>{b(e,ae),d(e,q,o(e,t.data_src))},De=(e,t,a)=>{const s=o(e,t.data_bg),l=o(e,t.data_bg_hidpi),n=J&&l?l:s;n&&(e.style.backgroundImage=`url("${n}")`,Z(e).setAttribute(r,n),re(e,t,a))},Ge=(e,t,a)=>{const s=o(e,t.data_bg_multi),l=o(e,t.data_bg_multi_hidpi),n=J&&l?l:s;n&&(e.style.backgroundImage=n,ce(e,t,a))},He=(e,t,a)=>{const s=o(e,t.data_bg_set);if(!s)return;let l=s.split("|").map((e=>`image-set(${e})`));e.style.backgroundImage=l.join(),ce(e,t,a)},ie={IMG:Ne,IFRAME:ze,VIDEO:Re,OBJECT:Te},Ve=(e,t)=>{const a=ie[e.tagName];a&&a(e,t)},je=(e,t,a)=>{const s=ie[e.tagName];s&&(s(e,t),re(e,t,a))},Be=["IMG","IFRAME","VIDEO","OBJECT"],Fe=e=>Be.indexOf(e.tagName)>-1,de=(e,t)=>{!t||xe(t)||Oe(t)||u(e.callback_finish,t)},j=(e,t,a)=>{e.addEventListener(t,a),e.llEvLisnrs[t]=a},Se=(e,t,a)=>{e.removeEventListener(t,a)},G=e=>!!e.llEvLisnrs,Je=(e,t,a)=>{G(e)||(e.llEvLisnrs={});const s="VIDEO"===e.tagName?"loadeddata":"load";j(e,s,t),j(e,"error",a)},L=e=>{if(!G(e))return;const t=e.llEvLisnrs;for(let a in t){const s=t[a];Se(e,a,s)}delete e.llEvLisnrs},_e=(e,t,a)=>{Ae(e),T(a,-1),we(a),c(e,t.class_loading),t.unobserve_completed&&k(e,a)},Pe=(e,t,a,s)=>{const o=R(t);_e(t,a,s),h(t,a.class_loaded),$(t,K),u(a.callback_loaded,t,s),o||de(a,s)},Ue=(e,t,a,s)=>{const o=R(t);_e(t,a,s),h(t,a.class_error),$(t,N),u(a.callback_error,t,s),a.restore_on_error&&g(t,m),o||de(a,s)},w=(e,t,a)=>{const s=Z(e)||e;G(s)||Je(s,(o=>{Pe(0,e,t,a),L(s)}),(o=>{Ue(0,e,t,a),L(s)}))},x=(e,t,a)=>{var s,o,l;Fe(e)?(w(s=e,o=t,l=a),je(s,o,l)):((e,t,a)=>{ke(e),w(e,t,a),Ce(e),De(e,t,a),Ge(e,t,a),He(e,t,a)})(e,t,a)},qe=(e,t,a)=>{e.setAttribute("loading","lazy"),w(e,t,a),Ve(e,t),$(e,W)},B=e=>{e.removeAttribute(r),e.removeAttribute(O),e.removeAttribute(C)},Ke=e=>{D(e,(e=>{B(e)})),B(e)},ue=e=>{D(e,(e=>{g(e,m)})),g(e,m)},Qe=e=>{ne(e,(e=>{g(e,A)})),g(e,se),e.load()},We=e=>{g(e,A)},Xe=e=>{g(e,ae)},Ye={IMG:ue,IFRAME:We,VIDEO:Qe,OBJECT:Xe},Ze=(e,t)=>{var a,s;(e=>{const t=Ye[e.tagName];t?t(e):Me(e)})(e),s=t,z(a=e)||R(a)||(c(a,s.class_entered),c(a,s.class_exited),c(a,s.class_applied),c(a,s.class_loading),c(a,s.class_loaded),c(a,s.class_error)),I(e),oe(e)},et=(e,t,a,s)=>{a.cancel_on_exit&&pe(e)&&"IMG"===e.tagName&&(L(e),Ke(e),ue(e),c(e,a.class_loading),T(s,-1),I(e),u(a.callback_cancel,e,t,s))},tt=(e,t,a,s)=>{const o=Ie(e);$(e,me),h(e,a.class_entered),c(e,a.class_exited),Le(e,a,s),u(a.callback_enter,e,t,s),o||x(e,a,s)},nt=(e,t,a,s)=>{z(e)||(h(e,a.class_exited),et(e,t,a,s),u(a.callback_exit,e,t,s))},st=["IMG","IFRAME","VIDEO"],ge=e=>e.use_native&&"loading"in HTMLImageElement.prototype,at=(e,t,a)=>{e.forEach((e=>{-1!==st.indexOf(e.tagName)&&qe(e,t,a)})),ee(a,0)},lt=e=>e.isIntersecting||e.intersectionRatio>0,ot=(e,t)=>{t.forEach((t=>{e.observe(t)}))},ct=(e,t)=>{ye(e),ot(e,t)},rt=(e,t)=>{var a;ge(e)||(t._observer=new IntersectionObserver((a=>{var s,o;s=e,o=t,a.forEach((e=>lt(e)?tt(e.target,e,s,o):nt(e.target,e,s,o)))}),{root:(a=e).container===document?null:a.container,rootMargin:a.thresholds||a.threshold+"px"}))},$e=e=>Array.prototype.slice.call(e),E=e=>e.container.querySelectorAll(e.elements_selector),it=e=>$e(e).filter(z),dt=e=>ve(e),_t=e=>$e(e).filter(dt),F=(e,t)=>it(e||E(t)),ut=(e,t)=>{_t(E(e)).forEach((t=>{c(t,e.class_error),I(t)})),t.update()},gt=(e,t)=>{_&&(t._onlineHandler=()=>{ut(e,t)},window.addEventListener("online",t._onlineHandler))},$t=e=>{_&&window.removeEventListener("online",e._onlineHandler)},v=function(e,t){const a=P(e);this._settings=a,this.loadingCount=0,rt(a,this),gt(a,this),this.update(t)};v.prototype={update:function(e){const t=this._settings,a=F(e,t);ee(this,a.length),S?this.loadAll(a):ge(t)?at(a,t,this):ct(this._observer,a)},destroy:function(){this._observer&&this._observer.disconnect(),$t(this),E(this._settings).forEach((e=>{oe(e)})),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){const t=this._settings;F(e,t).forEach((e=>{k(e,this),x(e,t,this)}))},restoreAll:function(){const e=this._settings;E(e).forEach((t=>{Ze(t,e)}))}},v.load=(e,t)=>{const a=P(t);x(e,a)},v.resetStatus=e=>{I(e)},_&&he(v,window.lazyLoadOptions);export{v as g};